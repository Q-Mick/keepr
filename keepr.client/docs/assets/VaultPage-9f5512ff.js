import{_ as A,K as I,b as C,v as E,u as S,r as O,o as P,x as b,A as o,P as v,l as u,c as r,k as T,d as k,e as l,f as c,g as n,t as _,y as K,F as D,h as N,i as L,m as B,n as M}from"./index-64453b10.js";const z={components:{Keep:I,KeepDetails:C},setup(){const d=E(),s=S(),i=O(!1);P(()=>e());async function e(){try{const t=s.params.vaultId;if(await b.setActiveVault(t),o.actVault.isPrivate==!0){if(o.user.id==o.actVault.creatorId)return;v.error("This vault is private and not yours. Stop being nosy.")}}catch(t){u.log(t.message),d.push({name:"Home"})}}async function g(t){try{if(await v.confirm("Are you sure you want to delete the vault?"))u.log("pushing route"),d.push({path:"/Account"}),await b.deleteVault(t);else return}catch(m){v.error(m)}}return{deleteVault:g,openDetails:i,account:r(()=>o.account),vault:r(()=>o.actVault),keeps:r(()=>o.vaultKeeps),actKeep:r(()=>o.activeVaultKeep),account:r(()=>o.account),myVaults:r(()=>o.myVaults),async setActiveVaultKeep(t){u.log("[FUNCTION - OPEN DETAILS MODAL] Payload --->",t.vaultKeepId),T.setActiveVaultKeep(t),i.value=!0},closeModal(){u.log("[CLOSE MODAL EVENT RECEIVED]"),i.value=!1}}}},F={key:0,id:"vaultImageSection"},R={class:"relative mx-auto max-w-7xl text-center px-10 mt-5 h-[15rem] overflow-hidden"},U=["src","title"],H={class:"absolute inset-36 text-white font-serif font-boldest text-4xl custom-text-shadow"},j={class:"absolute inset-44 text-white font-serif custom-text-shadow"},q={class:"relative mx-auto text-center w-[50%]"},G={class:"badge badge-ghost h-6 font-bold mx-auto my-1 cursor-default bg-zinc-300"},J={key:0,class:"mx-auto text-center mt-5 text-xl font-serif"},Q={class:"columns-2 sm:columns-4 gap-3 px-1 sm:pr-0 sm:gap-8 pt-5 mb-5 max-w-[75%] mx-auto"},W={key:1};function X(d,s,i,e,g,t){var y,f,h,x,V;const m=k("Keep"),w=k("KeepDetails");return l(),c(D,null,[e.account?(l(),c("section",F,[n("div",R,[n("img",{src:(y=e.vault)==null?void 0:y.img,alt:"Vault image",title:(f=e.vault)==null?void 0:f.name,class:"aspect-video h-full mx-auto rounded-lg"},null,8,U),n("p",H,_((h=e.vault)==null?void 0:h.name),1),n("p",j,"By "+_((V=(x=e.vault)==null?void 0:x.creator)==null?void 0:V.name),1)]),n("div",q,[n("button",G,_(e.keeps.length)+" Keeps in vault",1),e.account.id==e.vault.creatorId?(l(),c("button",{key:0,onClick:s[0]||(s[0]=a=>{var p;return e.deleteVault((p=e.vault)==null?void 0:p.id)}),class:"btn btn-error btn-xs rounded-full h-6 font-bold mx-auto my-1 cursor-pointer",title:"Delete vaults"},"Delete Vault")):K("",!0)]),e.keeps.length==0?(l(),c("p",J,"This vault is empty. .")):K("",!0),n("div",Q,[(l(!0),c(D,null,N(e.keeps,a=>(l(),B(m,{onClick:p=>e.setActiveVaultKeep(a),key:a.id,keep:a,class:"min-h-[5rem] my-5 border border-zinc-600",style:M({marginTop:a.id===e.keeps[0].id?"0":"auto"}),showCreatorPic:!1},null,8,["onClick","keep","style"]))),128))])])):(l(),c("div",W,"Loading...")),L(w,{onToggleDetails:e.closeModal,isOpen:e.openDetails,"onUpdate:isOpen":s[1]||(s[1]=a=>e.openDetails=a),keep:e.actKeep,"onUpdate:keep":s[2]||(s[2]=a=>e.actKeep=a),vault:e.myVaults,vaultDisplay:!0},null,8,["onToggleDetails","isOpen","keep","vault"])],64)}const Z=A(z,[["render",X],["__scopeId","data-v-107ecb64"]]);export{Z as default};
